[![Build Status](https://github.com/shinesolutions/swagger-aem-osgi/workflows/CI/badge.svg)](https://github.com/shinesolutions/swagger-aem-osgi/actions?query=workflow%3ACI)

Swagger AEM OSGI
----------------

Swagger AEM OSGI is an OpenAPI specification for configuring [Adobe Experience Manager (AEM)](http://www.adobe.com/au/marketing-cloud/enterprise-content-management.html) OSGI configuration API.

This specification is used to generate client libraries for Ruby and Python using [OpenAPI Generator](https://github.com/OpenAPITools/openapi-generator).

Learn more about Swagger AEM OSGI:

* [Generated Clients](https://github.com/shinesolutions/swagger-aem-osgi#generated-clients)
* [Development](https://github.com/shinesolutions/swagger-aem-osgi#development)
* [Testing](https://github.com/shinesolutions/swagger-aem-osgi#testing)
* [Frequently Asked Questions](https://github.com/shinesolutions/swagger-aem-osgi#frequently-asked-questions)
* [Versions History](https://github.com/shinesolutions/swagger-aem-osgi/blob/master/docs/versions.md)
* [Contribution](https://github.com/shinesolutions/swagger-aem-osgi#contribution)
* [Presentations](https://github.com/shinesolutions/swagger-aem-osgi/#presentations)

Swagger AEM OSGI is part of [AEM OpenCloud](https://aemopencloud.io) platform but it can be used as a stand-alone.

Generated Clients
-----------------

| Language   | Package                                                                                                                                                                                                                                                                 | Getting Started                                                                                                                                                                         | Status                                                                                                                                       |
|------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| Ruby       | [swagger_aem_osgi](https://rubygems.org/gems/swagger_aem_osgi) [![Published Version](https://badge.fury.io/rb/swagger_aem_osgi.svg)](https://rubygems.org/gems/swagger_aem_osgi)                                                                                                            | [README](https://github.com/shinesolutions/swagger-aem-osgi/blob/master/ruby/README.md) [CHANGELOG](https://github.com/shinesolutions/swagger-aem-osgi/blob/master/ruby/CHANGELOG.md)             | [![ruby](https://github.com/shinesolutions/aem-swagger-osgi/workflows/ruby/badge.svg)](https://github.com/shinesolutions/aem-swagger-osgi/actions?query=workflow%3Aruby) |
| Python     | [swaggeraemosgi](https://pypi.python.org/pypi/swaggeraemosgi) [![Published Version](https://badge.fury.io/py/swaggeraemosgi.svg)](https://pypi.python.org/pypi/swaggeraemosgi)                                                                                                          | [README](https://github.com/shinesolutions/swagger-aem-osgi/blob/master/python/README.md) [CHANGELOG](https://github.com/shinesolutions/swagger-aem-osgi/blob/master/python/CHANGELOG.md)         | [![python](https://github.com/shinesolutions/aem-swagger-osgi/workflows/python/badge.svg)](https://github.com/shinesolutions/aem-swagger-osgi/actions?query=workflow%3Apython) |

Development
-----------

To resolve swagger-aem-osgi dependencies:

    make deps

To generate API clients:

    make generate

To build language specific API clients:

    make <ruby|python>

Testing
-------

Unit tests are generated by OpenAPI Generator along with the client code.

Integration tests are part of Swagger AEM OSGI and require an AEM instance running on port 4502 with [Shine Solutions AEM Health Check](https://github.com/shinesolutions/aem-healthcheck) package installed.

By default it uses AEM running on http://localhost:4502 with `admin` username and `admin` password. AEM instance parameters can be configured using environment variables `aem_protocol`, `aem_host`, `aem_port`, `aem_username`, `aem_password`, and `aem_debug`.

Frequently Asked Questions
--------------------------

* __Q:__ How can I generate a new OpenAPI specification ?

  __A:__ To generate a new OpenAPI specification e.g. when there is a new release of AEM you simply can run the tool  `api_generator.rb`.

  Usage:

  `# ruby tools/openapi_spec_generator.rb --in templates/api.yml --out conf/api.yml'`

* __Q:__ How can I define a custom AEM host, user and password to generate OpenAPI Spec file ?

__A:__ To run the OpenAPI Spec generator against a defined AEM Host or to define your own username and password to authenticate against AEM you need to define them as environment variables

usage:
```
aem_verify_ssl=false
aem_protocol=https \
aem_host=author.sandpit.aemopencloud.net \
aem_port=443 \
aem_username=admin \
aem_password=admin \
ruby tools/openapi_spec_generator.rb --in templates/api.yml --out conf/api.yml
```

Contribution
------------

Since swagger-aem-osgi contains multiple languages, add a `[ruby|python]` prefix to language-specific commits, this will help with filtering full commits log.

Tagging should also be prefixed with:

* `api` when the release is for the OpenAPI specification, e.g. `api-1.0.0`
* `ruby|python` when the release is for the generated client, e.g. `ruby-0.9.2`, `python-0.9.0`

Presentations
-------------

* [Swagger AEM - An OpenAPI Specification for AEM](https://www.slideshare.net/cliffano/swagger-aem-an-openapi-specification-for-aem) at [adaptTo() 2019](https://adapt.to/2019/en.html)
